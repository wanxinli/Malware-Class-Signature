import numpy as np
from sklearn import metrics
from sklearn.metrics import roc_curve, auc
import matplotlib.pyplot as plt
from sklearn import tree
import csv


X = []

with open('filtered_metrics.csv','rb') as f:
    reader = csv.reader(f)

    next(reader, None)
    for row in reader:
        row_data = []
        for i in row[1:]:
            row_data.append(i)
        X.append(row_data)

for i in range(11):
    y = []
    scores = []
    with open('real_binary_class_%d.csv' % (i+1),'rb') as f:
        reader = csv.reader(f)

        for row in reader:
            y.append(int(row[1]))

    with open('filtered_prediction.csv','rb') as f:
        reader = csv.reader(f)

        for row in reader:
            scores.append(float(row[i]))

    y = np.array(y)
    scores = np.array(scores)

    print len(y)
    print len(scores)
    fpr, tpr, thresholds = metrics.roc_curve(y, scores, pos_label=1)
    print len(fpr)
    print len(tpr)
    print len(thresholds)
    roc_auc = auc(fpr, tpr)
    plt.figure()
    lw = 2
    plt.plot(fpr, tpr, color='darkorange',
         lw=lw, label='ROC curve (area = %0.2f)' % roc_auc)
    plt.plot([0,1],[0,1],color = 'navy', lw=lw, linestyle='--')
    plt.xlim([0.0,1.0])
    plt.ylim([0.0,1.05])
    plt.xlabel('False Positive Rate')
    plt.ylabel('True Positive Rate')
    plt.title('Class %i Receiver operating characteristic' % (i+1))
    plt.legend(loc="lower right")
    plt.savefig('roc_curve%i.png' % (i+1))
