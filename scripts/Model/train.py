from sklearn import tree
import sys
import csv
from time import time
import pickle
from sklearn.externals import joblib


"""
def split(argv):
    
    all = []
    data = []
    with open(argv[0],'rb') as f:
        reader = csv.reader(f)
        
        for row in reader:
            row_data = []
            for i in row[0:]:
                row_data.append(i)
            data.append(row_data)
        next(reader, None)
    
    
    with open(argv[1],'rb') as f:
        reader = csv.reader(f)
        
        for row in reader:
            row_data = []
            for i in row[0:]:
                row_data.append(i)
            family_name.append(row_data)
        next(reader, None)
"""
def main(argv):
    x = []
    y = []
    for i in range(1,10):
        with open('%d_metrics.csv' % i,'rb') as f:
            reader = csv.reader(f)
            
            next(reader, None)
            for row in reader:
                row_data = []
                for i in row[1:]:
                    row_data.append(i)
                x.append(row_data)


    for i in range(1,10):
        with open('%d_target.csv' % i,'rb') as f:
            reader = csv.reader(f)

            for row in reader:
                row_data = []
                for i in row[1:]:
                    row_data.append(i)
                y.append(row_data)
            next(reader, None)


    clf = tree.DecisionTreeClassifier(min_samples_split = 2)
    clf = clf.fit(x,y)
    res = clf.predict([x[0]])
    #num = clf.classes_
    #print num
    joblib.dump(clf,'model.pkl')
    
    
    print res
if __name__=='__main__':
    main(sys.argv[1:])
