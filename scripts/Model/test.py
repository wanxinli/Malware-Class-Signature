from sklearn import tree
import sys
import csv
from time import time
import pickle
from sklearn.externals import joblib


"""
def split(argv):
    
    all = []
    data = []
    with open(argv[0],'rb') as f:
        reader = csv.reader(f)
        
        for row in reader:
            row_data = []
            for i in row[0:]:
                row_data.append(i)
            data.append(row_data)
        next(reader, None)
    
    
    with open(argv[1],'rb') as f:
        reader = csv.reader(f)
        
        for row in reader:
            row_data = []
            for i in row[0:]:
                row_data.append(i)
            family_name.append(row_data)
        next(reader, None)
"""
def main(argv):
    x = []
    y = []
    with open('test_metrics.csv','rb') as f:
        reader = csv.reader(f)
            
        next(reader, None)
        for row in reader:
            row_data = []
            for i in row[1:]:
                row_data.append(i)
            x.append(row_data)



    clf = joblib.load('model.pkl')
    #res = clf.predict_proba(x)
    res = clf.predict(x)
    #print len(res)
    #print res
    res_labels = res.tolist()
    #res_proba = []
    #print res_labels
    
    #with open("test_predict.csv","wb") as f:
    #    writer = csv.writer(f)
    #    writer.writerows(res_proba)
    

    real_labels = []
    with open('test_target.csv','rb') as f:
        reader = csv.reader(f)
        
        for row in reader:
            for i in row[1:]:
                real_labels.append(i)
        next(reader, None)

    #print real_labels

    count = 0
    for i in range(len(res_labels)):
        if res_labels[i] == real_labels[i]:
            count = count + 1
    acc = (count * 1.0)/ len(res_labels)
    print acc

    #writer.writerows(proba)

if __name__=='__main__':
    main(sys.argv[1:])
